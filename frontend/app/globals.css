@import "tailwindcss";

:root {
  --font-size: 16px;
  --radius: 16px;
  --transition-duration-200: 200ms;

  /* Shadows */
  --elevation-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --elevation-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
    0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --elevation-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
    0 4px 6px -2px rgba(0, 0, 0, 0.05);

  /* Primitives (the Atoms) */

  /* ======================== */
  /* +++ COLOR PRIMITIVES +++ */
  /* ======================== */

  /* Neutral Color System (exact values from your Figma) */
  --neutral-100: #ffffff;
  --neutral-98: #f9f9fa;
  --neutral-96: #f3f3f4;
  --neutral-94: #eeeeef;
  --neutral-92: #e8e8e9;
  --neutral-90: #e2e2e3;
  --neutral-87: #dadad8;
  --neutral-80: #c6c6c7;
  --neutral-60: #909192;
  --neutral-50: #767778;
  --neutral-30: #454748;
  --neutral-25: #3a3c3d;
  --neutral-22: #333536;
  --neutral-20: #2f3132;
  --neutral-17: #282a2b;
  --neutral-12: #1e2021;
  --neutral-10: #1a1c1d;
  --neutral-6: #121415;
  --neutral-4: #0c0e0f;
  --neutral-0: #000000;

  /* Primitives for Experimental theme */
  --purple-40: #6f43c0; /* -40 value */
  --purple-60: #a47aef; /* -60 value */
  --teal-50: #278198; /* -50 value */
  --teal-70: #43b9d7; /* -70 value */
  --yellow-90: #f9e534; /* -90 value */
  --darkgrey-20: #263238; /* -20 value */
  --darkgrey-40: #4b626d; /* -40 value */
  --lightgrey-80: #bdc8d0; /* -80 value */
  --lightgrey-94: #eceff1; /* -94 value */
  --ex-info-60: #3192fc; /* -60 value */
  --ex-success-70: #2bc374; /* -70 value */
  --ex-error-60: #f75b5c; /* -60 value */
  --ex-warning-70: #f9920d; /* -70 value */

  /* ============================= */
  /* +++ SPACING Primitives    +++ */
  /* ============================= */

  --px-4: 0.25rem;
  --px-8: 0.5rem;
  --px-11: 0.6875rem;
  --px-12: 0.75rem;
  --px-14: 0.875rem;
  --px-16: 1rem;
  --px-18: 1.125rem;
  --px-20: 1.25rem;
  --px-22: 1.375rem;
  --px-24: 1.5rem;
  --px-26: 1.625rem;
  --px-28: 1.75rem;
  --px-30: 1.875rem;
  --px-32: 2rem;
  --px-36: 2.25rem;
  --px-40: 2.5rem;
  --px-44: 2.75rem;
  --px-48: 3rem;
  --px-52: 3.25rem;
  --px-56: 3.5rem;
  --px-60: 3.75rem;
  --px-64: 4rem;
  --px-80: 5rem;
  --px-96: 6rem;
  --px-120: 7.5rem;
  --px-130: 8.125rem;
  --px-160: 10rem;
  --px-192: 12rem;
  --px-240: 15rem;
  --px-256: 16rem;
  --px-320: 20rem;
  --px-480: 30rem;

  /* Static typography variables */
  /* Static, reusable line-height variables */
  --line-height-00: 1;
  --line-height-20: 1.2;
  --line-height-25: 1.25;
  --line-height-30: 1.3;
  --line-height-45: 1.45;
  --line-height-50: 1.5;

  /* Static, reusable letter-spacing variables */
  --spacing-tight: -0.025em;
  --spacing-normal: 0em;
  --spacing-relaxed: 0.015em;
  --spacing-wide: 0.025em;
  --spacing-wider: 0.05em;
}

/* ===== COLOR DESIGN TOKENS ===== */
@theme {
  /* Primary color - Purple */
  --color-primary: var(--purple-40);
  --color-on-primary: var(--neutral-100);

  /* Secondary color - Teal */
  --color-secondary: var(--teal-50);
  --color-on-secondary: var(--neutral-100);

  /* Tertiary color - Yellow */
  --color-tertiary: var(--yellow-90);
  --color-on-tertiary: var(--neutral-30);

  /* Keep error, success, warning the same as light theme */
  --color-error: var(--ex-error-60);
  --color-on-error: var(--error-100);

  --color-success: var(--ex-success-70);
  --color-on-success: var(--success-100);

  --color-warning: var(--ex-warning-70);
  --color-on-warning: var(--warning-100);

  /* Surface color tokens */

  --color-background: var(--neutral-98);
  --color-on-background: var(--neutral-10);

  --color-surface: var(--neutral-98);
  --color-on-surface: var(--neutral-10);
  --color-surface-variant: var(--neutral-90);
  --color-on-surface-variant: var(--neutral-30);

  --color-surface-dim: var(--lightgrey-80);
  --color-surface-bright: var(--neutral-98);
  --color-surface-container-lowest: var(--neutral-100);
  --color-surface-container-low: var(--neutral-96);
  --color-surface-container: var(--neutral-94);
  --color-surface-container-high: var(--neutral-92);
  --color-surface-container-highest: var(--neutral-90);

  --color-inverse-surface: var(--darkgrey-20);
  --color-inverse-on-surface: var(--neutral-96);
  --color-inverse-primary: var(--purple-40);

  /* Special color tokens */
  --color-outline: var(--neutral-50);
  --color-outline-variant: var(--neutral-80);
  --color-shadow: var(--neutral-0);
  --color-scrim: var(--neutral-0);

  --font-header: var(--font-outfit), sans-serif;
  --font-base: var(--font-inter), sans-serif;
  --font-slogan: var(--font-shadows), cursive;
}

[data-theme="dark"] {
  /* Primary color - Purple */
  --color-primary: var(--purple-60);

  /* Secondary color - Teal */
  --color-secondary: var(--teal-70);

  /* Tertiary color - Yellow ==> same as for light*/
  /* Keep error, success, warning the same as light theme */
  /* Surface colors */

  --color-surface-dim: var(--darkgrey-40);
  --color-inverse-surface: var(--lightgrey-94);
  --color-inverse-on-surface: var(--neutral-20);
  --color-inverse-primary: var(--purple-60);

  --color-background: var(--neutral-6);
  --color-on-background: var(--neutral-90);

  --color-surface: var(--neutral-6);
  --color-on-surface: var(--neutral-90);
  --color-surface-variant: var(--neutral-30);
  --color-on-surface-variant: var(--neutral-80);

  --color-surface-bright: var(--neutral-25);
  --color-surface-container-lowest: var(--neutral-4);
  --color-surface-container-low: var(--neutral-10);
  --color-surface-container: var(--neutral-12);
  --color-surface-container-high: var(--neutral-17);
  --color-surface-container-highest: var(--neutral-22);

  /* Special color tokens */
  --color-outline: var(--neutral-60);
  --color-outline-variant: var(--neutral-30);
  --color-shadow: var(--neutral-0);
  --color-scrim: var(--neutral-0);
}
@theme inline {
  /* Padding sizes */
  --p-xs: var(--px-4);
  --p-sm: var(--px-8);
  --p-md: var(--px-12);
  --p-lg: var(--px-16);
  --p-xl: var(--px-20);
  --p-2xl: var(--px-24);
  --p-3xl: var(--px-48);
  --p-4xl: var(--px-64);

  --p-card: var(--px-24);
  --p-hero: var(--px-32);
  --p-section-desktop: var(--px-64);
  --p-container: var(--px-16);
  --p-section-mobile: var(--px-20);

  /* Avatar sizes: xl, lg, md for the avatar; sm, xs, 2xs for the upload-button on top */
  --avatar-xl: var(--px-96);
  --avatar-lg: var(--px-64);
  --avatar-md: var(
    --px-48
  ); /* this avatar currently has no image upload button as too small */
  --avatar-sm: var(--px-40);
  --avatar-btn-xl: var(--px-40); /* container button-xl on avatar-xl*/
  --avatar-btn-lg: var(--px-36); /* container button-lg currently not used */
  --avatar-btn-md: var(--px-28); /* container button-md on avatar-lg */

  /* Icon sizes - used within buttons, input fields, navigation items */
  --icon-sm: var(--px-16);
  --icon-md: var(--px-18);
  --icon-lg: var(
    --px-20
  ); /* used for inputField icons like email, phone, password lock, location */
  --icon-xl: var(--px-24);
  --icon-2xl: var(--px-32);
  --icon-5xl: var(--px-80);

  /* Icon bordered sizes - icon size + 4px padding (var(--px-4)) for circular frame */
  --icon-bordered-sm: var(--px-24);
  --icon-bordered-md: var(--px-28);
  --icon-bordered-lg: var(--px-32);
  --icon-bordered-xl: var(--px-40);
  --icon-bordered-2xl: var(--px-48);

  --icon-av-xl: var(--px-60); /* icon for generic avatar-xl */
  --icon-av-lg: var(--px-40); /* icon for generic avatar-lg */
  --icon-av-md: var(--px-28); /* icon for generic avatar-md */
  --icon-av-sm: var(--px-24); /* icon for generic avatar-sm */

  --w-sidebar: var(--px-240);
  --w-sidebar-tablet: var(--px-130);
  --w-auth-form: var(--px-320);
  --w-auth-form-tablet: var(--px-480);

  --h-header: var(--px-64);
  --h-header-mobile: var(--px-56);
  --h-bottomNav: var(--px-64);
}

/* ===================================================================== */
/* ================= UTILITIES                               =========== */
/* ===================================================================== */

/* +++ TYPOGRAPHY +++ */
@utility display-lg {
  font-family: var(--font-header);
  /* font-size: var(--text-60px); */
  font-size: clamp(2rem, calc(1.558rem + 2.052vw), 3.5rem);
  line-height: var(--line-height-25);
  letter-spacing: var(--spacing-tight);
  @apply font-normal;
}
@utility display-md {
  font-family: var(--font-header);
  /* font-size: var(--text-48px); */
  font-size: clamp(1.75rem, calc(1.372rem + 1.67vw), 2.85rem);
  line-height: var(--line-height-25);
  letter-spacing: var(--spacing-normal);
  @apply font-normal;
}
@utility display-sm {
  font-family: var(--font-header);
  /* font-size: var(--text-36px); */
  font-size: clamp(1.5rem, calc(1.201rem + 1.432vw), 2.25rem);
  line-height: var(--line-height-25);
  letter-spacing: var(--spacing-normal);
  @apply font-normal;
}
@utility headline-lg {
  font-family: var(--font-header);
  /* font-size: var(--text-32px); */
  font-size: clamp(1.4rem, calc(1.18rem + 1.098vw), 2rem);
  line-height: var(--line-height-25);
  letter-spacing: var(--spacing-normal);
  @apply font-normal;
}
@utility headline-md {
  font-family: var(--font-header);
  /* font-size: var(--text-28px); */
  font-size: clamp(1.27rem, calc(1.094rem + 0.875vw), 1.75rem);
  line-height: var(--line-height-30);
  letter-spacing: var(--spacing-normal);
  @apply font-normal;
}
@utility headline-sm {
  font-family: var(--font-header);
  /* font-size: var(--text-24px); */
  font-size: clamp(1.09rem, calc(0.935rem + 0.795vw), 1.53rem);
  line-height: var(--line-height-30);
  letter-spacing: var(--spacing-normal);
  @apply font-normal;
}
@utility subheading-lg {
  font-family: var(--font-header);
  /* font-size: var(--text-28px); */
  font-size: clamp(1.27rem, calc(1.094rem + 0.875vw), 1.75rem);
  line-height: var(--line-height-20);
  letter-spacing: var(--spacing-wider);
  @apply font-normal;
}
@utility subheading-md {
  font-family: var(--font-header);
  /* font-size: var(--text-20px); */
  font-size: clamp(1.1rem, calc(0.935rem + 0.795vw), 1.53rem);
  line-height: var(--line-height-20);
  letter-spacing: var(--spacing-wider);
  @apply font-normal;
}
@utility title-lg {
  font-family: var(--font-base);
  /* font-size: var(--text-22px); */
  font-size: clamp(1rem, calc(0.851rem + 0.732vw), 1.4rem);
  line-height: var(--line-height-25);
  letter-spacing: var(--spacing-normal);
  @apply font-normal;
}
@utility title-md {
  font-family: var(--font-base);
  /* font-size: var(--text-18px); */
  font-size: clamp(1rem, calc(0.94rem + 0.286vw), 1.16rem);
  line-height: var(--line-height-30);
  letter-spacing: var(--spacing-relaxed);
  @apply font-normal;
}
@utility title-sm {
  font-family: var(--font-base);
  /* font-size: var(--text-14px); */
  font-size: clamp(0.88rem, calc(0.83rem + 0.223vw), 1rem);
  line-height: var(--line-height-45);
  letter-spacing: var(--spacing-relaxed);
  @apply font-normal;
}
@utility body-lg {
  font-family: var(--font-base);
  /* font-size: var(--text-18px); */
  font-size: clamp(1rem, calc(0.94rem + 0.286vw), 1.16rem);
  line-height: var(--line-height-50);
  letter-spacing: var(--spacing-wider);
  @apply font-normal;
}
@utility body-md {
  font-family: var(--font-base);
  /* font-size: var(--text-16px); */
  font-size: clamp(0.88rem, calc(0.83rem + 0.223vw), 1rem);
  line-height: var(--line-height-45);
  letter-spacing: var(--spacing-wide);
  @apply font-normal;
}
@utility body-sm {
  font-family: var(--font-base);
  /* font-size: var(--text-14px); */
  font-size: clamp(0.77rem, calc(0.732rem + 0.191vw), 0.88rem);
  line-height: var(--line-height-30);
  letter-spacing: var(--spacing-wider);
  @apply font-normal;
}
@utility label-lg {
  font-family: var(--font-base);
  /* font-size: var(--text-14px); */
  font-size: clamp(0.77rem, calc(0.732rem + 0.191vw), 0.88rem);
  line-height: var(--line-height-45);
  letter-spacing: var(--spacing-relaxed);
  color: var(--color-on-surface-variant);
  @apply font-normal;
}
@utility label-md {
  font-family: var(--font-base);
  /* font-size: var(--text-12px); */
  font-size: clamp(0.61rem, calc(0.565rem + 0.239vw), 0.74rem);
  line-height: var(--line-height-30);
  letter-spacing: var(--spacing-wider);
  color: var(--color-on-surface-variant);
  @apply font-normal;
}
@utility label-sm {
  font-family: var(--font-base);
  font-size: var(--px-11);
  /* font-size: clamp(0.52rem, calc(0.475rem + 0.207vw), 0.63rem); */
  line-height: var(--line-height-45);
  letter-spacing: var(--spacing-normal);
  color: var(--color-on-surface-variant);
  @apply font-normal;
}

@utility single-line-large {
  font-family: var(--font-base);
  /* font-size: var(--text-20px); */
  font-size: clamp(1.1rem, calc(0.935rem + 0.795vw), 1.53rem);
  line-height: var(--line-height-00);
  letter-spacing: var(--spacing-normal);
  @apply font-normal;
}
@utility single-line-medium {
  font-family: var(--font-base);
  /* font-size: var(--text-16px); */
  font-size: clamp(0.88rem, calc(0.83rem + 0.223vw), 1rem);
  line-height: var(--line-height-00);
  letter-spacing: var(--spacing-normal);
  @apply font-normal;
}
@utility single-line-base {
  font-family: var(--font-base);
  /* font-size: var(--text-14px); */
  font-size: clamp(0.77rem, calc(0.732rem + 0.191vw), 0.88rem);
  line-height: var(--line-height-00);
  letter-spacing: var(--spacing-normal);
  @apply font-normal;
}
@utility single-line-small {
  font-family: var(--font-base);
  /* font-size: var(--text-12px); */
  font-size: clamp(0.61rem, calc(0.565rem + 0.239vw), 0.74rem);
  line-height: var(--line-height-00);
  letter-spacing: var(--spacing-normal);
  @apply font-normal;
}
@utility form-field-base {
  font-family: var(--font-base);
  font-size: var(--px-16);
  /* font-size: clamp(0.61rem, calc(0.565rem + 0.239vw), 0.74rem); */
  line-height: var(--line-height-50);
  letter-spacing: var(--spacing-normal);
  @apply font-normal;
}
@utility logo-text-lg {
  font-family: var(--font-base);
  /* font-size: var(--text-24px); */
  font-size: clamp(1.09rem, calc(0.938rem + 0.78vw), 1.52rem);
  line-height: var(--line-height-00);
  letter-spacing: var(--spacing-normal);
  @apply font-normal;
}
@utility logo-text-md {
  font-family: var(--font-base);
  /* font-size: var(--text-20px); */
  font-size: clamp(1.1rem, calc(0.935rem + 0.795vw), 1.53rem);
  line-height: var(--line-height-00);
  letter-spacing: var(--spacing-normal);
  @apply font-normal;
}
@utility logo-text-sm {
  font-family: var(--font-base);
  /* font-size: var(--text-18px); */
  font-size: clamp(1rem, calc(0.94rem + 0.286vw), 1.16rem);
  line-height: var(--line-height-00);
  letter-spacing: var(--spacing-normal);
  @apply font-normal;
}

@utility logo-text-xs {
  font-family: var(--font-base);
  /* font-size: var(--text-16px); */
  font-size: clamp(0.88rem, calc(0.83rem + 0.223vw), 1rem);
  line-height: var(--line-height-00);
  letter-spacing: var(--spacing-normal);
  @apply font-normal;
}
@utility logo-text-xl {
  font-family: var(--font-base);
  /* font-size: var(--text-30px); */
  font-size: clamp(1.4rem, calc(1.219rem + 0.907vw), 1.9rem);
  line-height: var(--line-height-00);
  letter-spacing: var(--spacing-normal);
  @apply font-normal;
}
@utility slogan-lg {
  font-family: var(--font-slogan);
  /* font-size: var(--text-60px); */
  font-size: clamp(2.98rem, calc(2.689rem + 1.432vw), 3.76rem);
  line-height: var(--line-height-00);
  letter-spacing: var(--spacing-wider);
  @apply font-normal;
}
@utility slogan-md {
  font-family: var(--font-slogan);
  /* font-size: var(--text-48px); */
  font-size: clamp(2.19rem, calc(1.901rem + 1.432vw), 2.98rem);
  line-height: var(--line-height-20);
  letter-spacing: var(--spacing-wider);
  @apply font-normal;
}
@utility slogan-sm {
  font-family: var(--font-slogan);
  /* font-size: var(--text-40px); */
  font-size: clamp(1.75rem, calc(1.48rem + 1.352vw), 2.49rem);
  line-height: var(--line-height-20);
  letter-spacing: var(--spacing-wider);
  @apply font-normal;
}

@utility emphasized {
  @apply font-semibold;
}
@utility strong {
  @apply font-bold;
}

/* +++ SPACING UTILITIES +++ */
@utility p-* {
  padding: --value(--p- *);
}
@utility pt-* {
  padding-top: --value(--p- *);
}
@utility pb-* {
  padding-bottom: --value(--p- *);
}
@utility pl-* {
  padding-left: --value(--p- *);
}
@utility pr-* {
  padding-right: --value(--p- *);
}
@utility px-* {
  padding-left: --value(--p- *);
  padding-right: --value(--p- *);
}
@utility py-* {
  padding-top: --value(--p- *);
  padding-bottom: --value(--p- *);
}
@utility gap-* {
  gap: --value(--p- *);
}
@utility m-* {
  margin: --value(--p- *);
}
@utility mt-* {
  margin-top: --value(--p- *);
}
@utility mb-* {
  margin-bottom: --value(--p- *);
}
@utility ml-* {
  margin-left: --value(--p- *);
}
@utility mr-* {
  margin-right: --value(--p- *);
}
@utility mx-* {
  margin-left: --value(--p- *);
  margin-right: --value(--p- *);
}
@utility my-* {
  margin-top: --value(--p- *);
  margin-bottom: --value(--p- *);
}
/* +++ GENERAL UTILITIES +++ */
@utility icon-* {
  height: --value(--icon- *);
  width: --value(--icon- *);
}
@utility icon-bordered-* {
  height: --value(--icon-bordered- *);
  width: --value(--icon-bordered- *);
}
@utility av-* {
  height: --value(--avatar- *);
  width: --value(--avatar- *);
}
@utility avatar-container {
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--color-primary);
  border-radius: 50%;
}
@utility focus-ring-base {
  outline: none !important;
  outline: 2px solid transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px var(--color-surface, var(--color-surface)),
    0 0 0 4px var(--tw-ring-color);
}
@utility disabled-item {
  opacity: 0.6;
  cursor: not-allowed;
  pointer-events: none;
}
@utility btn-base {
  /* inline-flex */
  display: inline-flex;
  /* items-center */
  align-items: center;
  /* align-self: center; */
  /* justify-center */
  justify-content: center;
  /* gap-2 */
  gap: var(--px-8);
  /* whitespace-nowrap */
  white-space: nowrap;
  /* transition-all duration-200 */
  transition-property: all;
  transition-duration: var(--transition-duration-200);
  /* [&_svg]:pointer-events-none, shrink-0 */
  & svg {
    pointer-events: none;
    flex-shrink: 0;
  }
  /* default square shape is applied, if rounded-full is required then it is added */
  border-radius: var(--px-8);
}
@utility input-base {
  min-width: var(--width-input-min);
  /* add to unify the form-fields */
  @apply flex items-center justify-between;
  @apply w-full p-md;
  @apply bg-surface-container-lowest border border-outline rounded-lg;
  @apply form-field-base text-on-surface placeholder:text-on-surface-variant/60;
  @apply transition-colors duration-200;

  /* Apply max-width only to non-textarea inputs */
  &:not(textarea) {
    max-width: var(--width-input-max);
  }

  &:focus,
  &:focus-within {
    --tw-ring-color: color-mix(in srgb, var(--color-primary), transparent 80%);
    @apply focus-ring-base border-primary;
  }

  &:disabled {
    @apply disabled-item;
  }

  /* Add left padding when icon is present */
  &.has-icon {
    padding-left: var(--px-44); /* Icon space + gap */
  }
}

/* === LAYOUT CONTAINER CLASSES === */
@layer components {
  /* +++ Module container responsible for creating the header props, render the header and the footer +++ */
  .module-container {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    width: 100%;
    max-width: min(100vw, 90rem);
    background-color: var(--color-background);
    color: var(--color-on-background);
    min-height: 100vh;
    margin: auto;
  }
  /* +++ HEADER Component +++ */
  .header {
    @apply sticky top-0 z-50;
    @apply flex items-center w-full gap-sm px-2;
    @apply border-b border-outline-variant bg-background;
    height: var(--h-header-mobile);
    flex-shrink: 0; /* Prevent shrinking */

    @media (min-width: 1024px) {
      height: var(--h-header);
    }
  }

  /* --- Building blocks of the Header:
      .header__logo: the container for the Logo (fixed width)
      .header__links: this container GROWS and uses up available space (contains hamburger OR desktop nav)
      .header__search: container for the search box  
      .header__actions: container for the buttons (responsive - same class, different behavior via media queries)
  */

  .header__logo {
    @apply flex items-center justify-start shrink-0;
  }
  /* Mobile title - shown on mobile, centered, hidden on desktop */
  .header__title {
    @apply flex items-start justify-start flex-1 title-lg emphasized;
    padding-left: var(--px-20);
    @media (min-width: 1024px) {
      @apply hidden;
    }
  }
  .header__links {
    @apply flex items-center justify-center grow;
  }

  /* Desktop navigation - hidden on mobile */
  .header__links__container {
    @apply hidden;
    @media (min-width: 1024px) {
      @apply flex items-center gap-lg;
    }
  }

  /* Mobile dropdown - conditional rendering, positioned absolutely */
  .header__dropdown {
    @apply absolute top-full left-0 w-full;
    @apply bg-surface-container border-t border-outline-variant;
    @apply shadow-md;
    @apply flex flex-col gap-sm p-container;
    @apply z-50;
  }

  /* When inside mobile dropdown: show as flex-col, left-aligned */
  .header__dropdown .header__links__container {
    @apply flex flex-col items-start gap-sm w-full;
  }

  /* Mobile hamburger button - hidden on desktop */
  .header__hamburger {
    @apply flex items-center justify-end;
    @media (min-width: 1024px) {
      @apply hidden;
    }
  }

  .header__search {
    @apply hidden;
    @media (min-width: 1024px) {
      @apply flex items-center;
    }
  }
  /* Mobile search inside dropdown - centered at top */
  .header__dropdown .header__search {
    @apply flex justify-center;
    padding-bottom: var(--gap-md);
  }
  /* Header Action Buttons */
  .header__actions {
    @apply hidden;
    @media (min-width: 1024px) {
      @apply flex items-center gap-md;
    }
  }

  /* When inside mobile dropdown: show as flex-col centered, then flex-row centered on tablet+ */
  .header__dropdown .header__actions {
    @apply flex flex-col items-center gap-md;

    /* Tablet+: Horizontal centered layout */
    @media (min-width: 640px) {
      @apply flex-row justify-center gap-md m-auto;
    }
  }

  /* +++ FOOTER Component - responsive +++ */

  .footer {
    padding: var(--px-4) var(--px-4);
    @apply flex flex-col gap-xs;
    @apply bg-background;
    position: relative;
    z-index: 10;
  }

  @media (min-width: 640px) {
    .footer {
      padding: var(--px-12) var(--px-12);
      gap: var(--px-12);
    }
  }
  @media (min-width: 1024px) {
    .footer {
      padding: var(--px-16) var(--px-16);
      gap: var(--px-12);
    }
  }

  .footer__main {
    @apply hidden;
    @media (min-width: 640px) {
      @apply flex gap-xl;
    }
  }
  .footer__main > :first-child {
    flex-grow: 1; /* Applies flex-grow: 1 to the first direct child */
  }
  .footer__main__ct {
    @apply hidden;
    @media (min-width: 640px) {
      @apply flex flex-col;
      @apply gap-md;
      @apply text-on-surface;
      min-width: 200px;
    }
  }
  .footer__copyright {
    @apply hidden;
    @media (min-width: 640px) {
      @apply flex items-center justify-center label-md text-on-surface-variant;
    }
  }
  .footer__main__ct__nav {
    @apply hidden;
    @media (min-width: 640px) {
      padding-top: var(--px-12);
      @apply flex flex-col gap-sm;
      @apply body-md text-on-surface-variant;
    }
  }
  .footer__main__ct__nav > a:hover {
    @apply text-primary transition-colors;
  }
  .footer__socialLinks {
    @apply hover:text-primary transition-colors;
  }

  /* Footer classes for mobile version */
  .footer__line-1 {
    @apply flex items-center gap-sm label-sm;
    @media (min-width: 640px) {
      @apply hidden;
    }
  }
  .footer__line-2 {
    @apply flex gap-xl label-sm;
    @media (min-width: 640px) {
      @apply hidden;
    }
  }
  .footer__line-2 > a:hover {
    @apply text-primary transition-colors;
  }
}
/* +++ PAGE Layout +++ */
@layer components {
  .page {
    @apply block w-full flex-1;
    padding-bottom: var(
      --h-bottomNav
    ); /* Account for bottom nav: 96px or 6rem */
  }
  @media (min-width: 640px) {
    .page {
      @apply flex;
      @apply gap-lg;
    }
  }
  @media (min-width: 1024px) {
    .page {
      @apply pb-0; /* no bottom padding */
    }
  }

  .page__content {
    @apply flex flex-col;
    @apply gap-md;
    @apply p-lg; /* this will ensure the safety margin */
  }
  @media (min-width: 640px) {
    .page__content {
      @apply flex-1;
      @apply gap-lg;
    }
  }

  .page__header {
    @apply flex items-start;
    @apply gap-md p-md;
    @apply bg-surface;
  }
  @media (min-width: 640px) {
    .page__header {
      @apply rounded-lg;
    }
  }
  /* Change the avatar size for mobile - override the utility directly */
  @media (max-width: 639px) {
    .page__header .avatar-xl {
      @apply av-lg;
    }
    .page__header .avatar-xl .avatar-icon {
      @apply icon-av-lg;
    }
  }

  .page__form {
    @apply p-lg;
    @apply flex-1;
  }
  @media (min-width: 1024px) {
    .page__form {
      @apply bg-surface border border-outline-variant rounded-lg;
    }
  }

  .page__form__button {
    @apply hidden;
  }
  @media (min-width: 640px) {
    .page__form__button {
      @apply block;
      @apply mt-lg;
    }
  }
}
/* +++ SIDEBAR Layout +++ */
@layer components {
  /* Refactor: Step 2 - classes */
  /* NEW: Sidebar classes */
  .sidebar {
    @apply hidden; /* just to make sure mobile does not show it */
  }
  /* tablet */
  @media (min-width: 640px) {
    .sidebar {
      width: var(--w-sidebar-tablet);
      @apply flex flex-col shrink-0;
      @apply bg-surface-container; /* Match tablet tabs background */
      @apply border-r border-outline-variant;
      padding-top: var(--px-12); /* alternatively: @apply py-md */
      padding-bottom: var(--px-12);
    }
  }
  /* desktop */
  @media (min-width: 1024px) {
    .sidebar {
      width: var(--w-sidebar);
    }
  }

  .sidebar nav {
    @apply flex flex-col;
    padding: 0;
    gap: 0;
  }

  .sidebar__item {
    @apply hidden; /* making sure it's not shown on mobile */
  }
  /* tablet */
  @media (min-width: 640px) {
    .sidebar__item {
      @apply flex flex-col items-center justify-center;
      @apply gap-xs;
      @apply py-sm px-xs;
      @apply border-l-0;
      @apply relative;
      @apply text-on-surface;
      @apply text-center;
      @apply text-on-surface label-lg;
      white-space: normal;
      word-wrap: break-word;
      max-width: 100%;
      @apply transition-colors duration-200;
      /* Border on left for hover state (like header menu items) */
      @apply border-l-2 border-transparent;
      margin: var(--px-8);
      &:hover:not(.active) {
        @apply border-primary;
        /* No background change on hover - just border */
      }

      &.active {
        @apply text-primary;
        /* Active state: primary text color, no border unless hovering */
        /* Border stays transparent for active items to avoid permanent left border */
      }
    }
  }
  /* desktop */
  @media (min-width: 1024px) {
    .sidebar__item {
      @apply flex-row justify-start;
      @apply text-left;
      gap: var(--px-8); /* @apply gap-sm */
      padding: var(--px-8); /* @apply p-sm */
      margin: 0 0 0 var(--px-12); /* reset the margin from tablet */
    }
  }

  /* NOTE: there is no need for a .profile-page__sidebar__alert class! 
    Simply use the badge and overwrite with bg-error text-on-error */
  .sidebar__badge {
    @apply hidden; /* not shown on mobile */
  }
  @media (min-width: 640px) {
    .sidebar__badge {
      @apply absolute;
      top: -4px;
      right: -4px;
      border: 2px solid var(--color-on-secondary);
      @apply flex items-center justify-center;
      @apply min-w-[20px] h-[20px];
      @apply px-xs;
      @apply rounded-full;
      @apply bg-secondary text-on-secondary;
      @apply label-sm emphasized;
    }
  }

  .sidebar__trailing {
    @apply hidden;
  }
  @media (min-width: 1024px) {
    .sidebar__trailing {
      @apply ml-auto;
      @apply text-on-surface-variant;
    }
  }
}
/* === BOTTOM NAVIGATION BAR Component (Mobile) === */
@layer components {
  /* Mobile-only bottom navigation bar - hidden on desktop */
  .bottom-nav {
    @apply fixed bottom-0 left-0 right-0;
    @apply z-100; /* the bottom-nav stays on top */
    @apply flex items-center justify-around;
    @apply bg-surface border-t border-outline-variant;

    /* Height + safe area for iOS notch/home indicator */
    height: calc(var(--h-bottomNav) + env(safe-area-inset-bottom));
    padding-bottom: env(safe-area-inset-bottom);

    /* Shadow for elevation */
    box-shadow: var(--elevation-md);

    /* Hidden on desktop (1024px+) */
    @media (min-width: 1024px) {
      @apply hidden;
    }
  }
  /* Individual navigation item */
  .bottom-nav__item {
    @apply flex flex-col items-center justify-center gap-xs;
    @apply flex-1;
    @apply text-on-surface-variant;
    @apply transition-colors duration-200;

    /* Clickable area */
    min-height: 48px;
    max-width: 80px;

    /* Remove default button/link styles */
    background: none;
    border: none;
    cursor: pointer;
    text-decoration: none;

    /* Active state */
    &.active {
      @apply text-primary border-t-2 border-primary;
    }

    /* Hover/focus states */
    &:hover,
    &:focus {
      @apply text-primary;
      outline: none;
    }
  }

  /* FAB (Floating Action Button) - center item with elevation */
  .bottom-nav__item--fab {
    @apply relative;
    @apply flex items-center justify-center;
    @apply bg-primary text-on-primary;
    @apply rounded-full;
    /* Larger circular button */
    width: 48px;
    height: 48px;
    min-height: 48px;

    /* Elevated above bottom nav */
    margin-top: -32px;
    box-shadow: var(--elevation-lg);

    /* Remove flex-col and gap for FAB */
    flex-direction: row;
    gap: 0;

    /* Hover/focus states */
    &:hover,
    &:focus {
      @apply bg-primary text-on-primary;
    }
    /* Active/pressed state */
    &:active {
      transform: scale(0.95);
    }
  }
  @media (min-width: 640px) and (max-width: 1023px) {
    .bottom-nav__item--fab {
      width: 56px;
      height: 56px;
      min-height: 56px;

      /* Elevated above bottom nav */
      margin-top: -24px; /* Half of height to lift it up */
    }
  }
  /* Label text under icon */
  .bottom-nav__label {
    @apply label-sm;
    @apply text-center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
  }
  @media (min-width: 640px) and (max-width: 1023px) {
    .bottom-nav__label {
      @apply label-lg;
    }
  }
  /* Notification badge (red dot with count) */
  .bottom-nav__badge {
    @apply absolute -top-1 -right-1;
    @apply flex items-center justify-center;
    @apply bg-error text-on-error;
    @apply rounded-full;
    @apply label-sm;

    min-width: 18px;
    height: 18px;
    padding: 0 4px;
  }
}
/* +++ dynamic GRID Layout +++ */
@layer components {
  .grid-3 {
    @apply grid grid-cols-1 gap-sm;
  }
  @media (min-width: 640px) {
    .grid-3 {
      @apply grid-cols-2 gap-lg;
    }
  }
  @media (min-width: 1024px) {
    .grid-3 {
      @apply grid-cols-3;
    }
  }

  .grid--textarea {
    @apply col-span-full; /* Bio spans full width on all breakpoints */
  }
}
/* +++ AUTH Pages +++ */
@layer components {
  .authForm-wrapper {
    @apply z-50 max-w-xl m-auto;
    min-width: var(--w-auth-form);
    @media (min-width: 640px) {
      min-width: var(--w-auth-form-tablet);
    }

    /* 
    w-full p-4 
                  shrink-0 z-30
                  bg-surface-container-low 
                  rounded-2xl 
                  border border-outline-variant 
                  min-h-5/6
                  shadow-2xl
    */
  }
}
/* +++ PROFILE PAGE Component +++ */
@layer components {
  /* ========================================
    MOBILE VIEW MODE ONLY
    ======================================== */

  /* View mode: Card styling */
  @media (max-width: 639px) {
    .page__form[data-mode="view"] .profile-page__mobile-item {
      @apply flex items-start gap-xs;
      @apply px-md pt-md pb-0;
      @apply bg-surface border border-outline-variant rounded-lg;
      @apply hover:bg-surface-container;
      @apply transition-colors duration-200;
    }

    .page__form[data-mode="view"] .profile-page__mobile-item > div:first-child {
      @apply flex-1;
    }
  }

  .profile-page__mobile-item__button {
    display: none !important;  /* !important needed to override .btn-base display: inline-flex */
  }

  /* View mode: Display-only fields */
  @media (max-width: 639px) {
    .page__form[data-mode="view"] .profile-page__mobile-item input,
    .page__form[data-mode="view"] .profile-page__mobile-item select,
    .page__form[data-mode="view"] .profile-page__mobile-item textarea,
    .page__form[data-mode="view"]
      .profile-page__mobile-item
      button:not(.profile-page__mobile-item__button),
    .page__form[data-mode="view"] .profile-page__mobile-item .input-base {
      pointer-events: none;
      outline: none;
      cursor: default;
      background: transparent;
      border: none;
    }

    .page__form[data-mode="view"] .profile-page__mobile-item .input-base {
      background: transparent !important;
      border: none !important;
      padding: 0 !important;
    }

    .page__form[data-mode="view"]
      .profile-page__mobile-item
      .input-base.has-icon {
      padding-left: var(--px-32) !important;
    }

    .page__form[data-mode="view"] .profile-page__mobile-item .input-field > svg,
    .page__form[data-mode="view"]
      .profile-page__mobile-item
      .input-field
      > span
      > svg {
      @apply left-0;
    }
  }

  /* View mode: Show edit buttons */
  @media (max-width: 639px) {
    .page__form[data-mode="view"] .profile-page__mobile-item__button {
      display: flex !important;  /* !important to override base display: none !important */
      @apply rounded-full hover:bg-surface-container;
    }
  }

  /* View mode: Hide save button */
  @media (max-width: 639px) {
    .page__form[data-mode="view"] .page__form__button {
      display: none;
    }
  }

  /* ========================================
    MOBILE SETUP MODE ONLY
    ======================================== */

  /* Setup mode: Hide edit buttons (not needed - fields are editable) */
  @media (max-width: 639px) {
    .page__form[data-mode="setup"] .profile-page__mobile-item__button {
      display: none !important;
    }
  }

  /* Setup mode: Show save button */
  @media (max-width: 639px) {
    .page__form[data-mode="setup"] .page__form__button {
      display: block;
    }
  }
}
/* === More Menu Component === */
@layer components {
  /* +++ MORE MENU (MOBILE) +++ */

  /* Top Section Container - Profile Card + Sign Out Button */
  .more-menu__top-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--px-20);
    @apply gap-lg;
  }

  /* Profile Card at Top */
  .more-menu__profile-card {
    @apply flex items-center gap-md;
    @apply p-md rounded-lg;
    @apply bg-surface-container-lowest border border-outline-variant;
    @apply transition-colors duration-200;
    min-width: 66.666667%; /* 2/3 width */

    &:hover {
      @apply bg-surface-container;
    }
  }

  /* Section Container */
  .more-menu__section {
    display: flex;
    flex-direction: column;
    padding: 0;
    gap: var(--px-12);
    margin-bottom: var(--px-20);
  }

  /* Section Header (contains title) */
  .more-menu__section-header {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: flex-end;
    height: var(--px-56);
    @apply bg-surface-container border-b border-outline-variant;
  }

  /* Section Header Inner (for padding) */
  .more-menu__section-header-inner {
    padding-left: var(--px-16);
    padding-right: var(--px-16);
    padding-bottom: var(--px-8);
  }

  /* Section Title (Settings, Features, Resources, Learn) */
  .more-menu__section-title {
    @apply title-lg emphasized;
    margin: 0;
  }

  /* Section Content (menu items container) */
  .more-menu__section-content {
    display: flex;
    flex-direction: column;
    padding-left: var(--px-16);
    padding-right: var(--px-16);
  }

  /* Menu Item (sidebar-style hover) */
  .more-menu__item {
    @apply flex items-center;
    gap: var(--px-12);
    padding: var(--px-12) var(--px-16);
    @apply text-on-surface;
    @apply transition-colors duration-200;
    @apply relative;
    /* Border on left for hover state (like sidebar) */
    @apply border-l-2 border-transparent;

    &:hover {
      @apply border-primary;
      /* No background change on hover - just border */
    }
  }

  /* Menu Item Icon */
  /*
  .more-menu__item-icon {
    @apply w-10 h-10 rounded-full;
    @apply flex items-center justify-center;
    @apply flex-shrink-0;
    ** Icon border in primary color **
    @apply border border-primary;
    @apply text-primary;
  }
  */
  /* Menu Item Label */
  .more-menu__item-label {
    @apply body-lg flex-1;
  }

  /* Menu Item Trailing Icon */
  .more-menu__item-trailing {
    @apply text-on-surface-variant;
  }

  /* Footer Links Section */
  .more-menu__footer-links {
    @apply flex flex-col gap-xs;
    padding: var(--px-16);
  }

  .more-menu__footer-link {
    @apply body-md text-primary;
    @apply transition-colors duration-200;

    &:hover {
      color: var(--color-hovered-primary);
    }
  }
}
/* === FORM FIELD CLASSES === */
@layer components {
  /* +++ INPUT Fields +++ */
  .input-field {
    @apply relative flex items-center;
    @apply rounded-lg;
  }

  /* Auto-detect textarea and remove fixed height */
  .input-field:has(textarea) {
    height: auto !important;
    @apply items-start;
  }

  .input-field > svg,
  .input-field > span > svg {
    @apply absolute left-[var(--px-12)] z-10 pointer-events-none;
  }

  .input-field__top-label {
    @apply body-lg emphasized text-on-surface-variant;
  }
  .input-field__sub-label {
    @apply label-sm text-on-surface-variant;
  }
  /* Extra content on label line (e.g., "Forgot password?" link, character counters)
     Added: 2025-11-26
     IMPACT: used in app/ui/formField.tsx */
  .input-field__top-label-extra {
    @apply body-md text-secondary ml-auto;
  }
  /* This is the edit button that is shown for FormField variant='display */
  .input-field__display-button {
    display: none !important; /* necessary as @utility btn-base has higher specificity */
    @media (min-width: 640px) {
      display: inline-flex;
    }
  }
}
/* === Custom Checkbox === */
@layer components {
  /* +++ CUSTOM CHECKBOX - Unified design using primary color +++ */
  .custom-checkbox {
    appearance: none;
    -webkit-appearance: none;
    position: relative;
    width: var(--px-24);
    height: var(--px-24);
    border-radius: var(--px-4); /* var(--radius-sm); */
    border: 1px solid var(--color-outline);
    background-color: var(--color-surface-container-lowest);
    cursor: pointer;
    transition: all 200ms ease;
    flex-shrink: 0;

    &:hover:not(:checked) {
      border-color: var(--color-primary);
    }

    &:focus,
    &:focus-visible {
      --tw-ring-color: color-mix(
        in srgb,
        var(--color-primary),
        transparent 80%
      );
      @apply focus-ring-base border-primary;
    }

    &:checked {
      background-color: var(--color-primary);
      border-color: var(--color-primary);

      &::after {
        content: "✓";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: var(--color-on-primary);
        font-size: 14px;
        font-weight: bold;
        line-height: 1;
      }
    }

    &:disabled {
      @apply disabled-item;
    }
  }
}
/* === Custom RadioButton === */
@layer components {
  /* +++ CUSTOM RADIO BUTTON +++ */
  .custom-radio {
    appearance: none;
    -webkit-appearance: none;
    position: absolute; /* ← OUT of flow, no space taken */
    opacity: 0; /* ← Invisible */
    width: 1px; /* ← Minimal size (accessibility) */
    height: 1px;
    pointer-events: none; /* ← Clicks pass through */

    &:focus {
      outline: none;
      /* Default focus behaviour is applied to the .radio-wrapper */
    }
  }

  /* Radio wrapper and label */
  .radio-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;

    &:has(input:disabled) .radio-label {
      @apply disabled-item;
      color: color-mix(in srgb, var(--color-on-surface), transparent 50%);
    }

    &:has(input:focus) .radio-label {
      --tw-ring-color: color-mix(
        in srgb,
        var(--color-primary),
        transparent 80%
      );
      @apply focus-ring-base border-primary;
    }
  }

  .radio-label {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    width: var(--px-24); /* ← Add explicit size */
    height: var(--px-24); /* ← Match your icon size */
    border-radius: 9999px;
    color: var(--color-primary);
    cursor: pointer;
    transition: all 200ms ease;
  }
}
/* === Custom Toggle === */
@layer components {
  /* +++ CUSTOM TOGGLE +++ */
  .custom-toggle {
    position: relative;
    width: var(--px-40);
    height: var(--px-24);
    border-radius: 9999px; /* rounded-full */
    padding: 2px;
    cursor: pointer;
    transition: background-color 200ms ease;
    flex-shrink: 0;

    &[data-state="unchecked"] {
      background-color: color-mix(
        in srgb,
        var(--color-on-surface-variant) 50%,
        transparent
      );

      .custom-toggle-knob {
        left: 2px;
        background-color: var(--color-on-surface-variant);
      }
    }

    &[data-state="checked"] {
      background-color: var(--color-primary);

      .custom-toggle-knob {
        left: var(--px-18);
        background-color: var(--color-on-surface);
      }
    }

    &:disabled {
      @apply disabled-item;
    }

    &:focus {
      --tw-ring-color: color-mix(
        in srgb,
        var(--color-primary),
        transparent 80%
      );
      @apply focus-ring-base border-primary;
    }
  }

  /* Toggle knob */
  .custom-toggle-knob {
    position: absolute;
    width: var(--px-20);
    height: var(--px-20);
    border-radius: 9999px;
    top: 2px;
    transition: left 200ms ease, background-color 200ms ease;
    box-shadow: 0 3px 8px 0 rgba(0, 0, 0, 0.15), 0 3px 1px 0 rgba(0, 0, 0, 0.06);
  }
}
/* === Custom ComboBox (Select) === */
@layer components {
  /* +++ CUSTOM SELECT COMPONENT - CSS-driven dropdown styling +++ */

  /* --- Dropdown Container ---
   * Positioned below the trigger button, full width of parent
   * Small gap (4px) from trigger for breathing room
   * Elevated z-index to appear above other content
   * Shadow and border create depth and definition
   */
  .select-dropdown {
    @apply absolute top-full left-0 right-0 z-50;
    @apply bg-surface-container-lowest border border-outline-variant rounded-lg shadow-lg overflow-hidden;
    margin-top: var(--px-4);
  }

  /* --- Options List Container ---
   * Scrollable container for dropdown options
   * Max height prevents excessive dropdown size
   * Smooth scrolling for keyboard navigation
   */
  .select-options-list {
    overflow-y: auto;
    max-height: var(--px-240); /* ~15rem - fits ~8-10 options */
  }

  /* --- Individual Option Item ---
   * Base styling for each selectable option
   * Uses p-md via @apply for consistent padding
   * Single-line text prevents wrapping, truncates if needed
   * Smooth color transitions for hover/highlight states
   */
  .select-option {
    @apply p-md single-line-base;
    @apply cursor-pointer transition-colors duration-150;
    @apply flex items-center justify-between;
    padding-inline: var(--px-16); /* Override p-md for horizontal padding */
    padding-block: var(--px-12); /* Override p-md for vertical padding */
    color: var(--color-on-surface);

    &:hover {
      background-color: var(--color-primary);
      color: var(--color-on-primary);
    }
  }

  /* --- Option Highlighted State ---
   * Applied via keyboard navigation (ArrowUp/ArrowDown)
   * Same styling as hover for consistency
   * Takes precedence over default state
   */
  .select-option--highlighted {
    background-color: var(--color-primary);
    color: var(--color-on-primary);
  }

  /* --- Option Selected State ---
   * Font weight indicates currently selected value
   * Can be combined with highlighted state
   */
  .select-option--selected {
    font-weight: 500; /* Medium weight for subtle emphasis */
  }
}
/* === Custom Date Input for Calendar-picker === */
@layer components {
  /* +++ DATE INPUT Custom styling - Hide native calendar icon but keep functionality +++ */
  .date-input-custom {
    /* Force same height as other inputs to prevent layout shift */
    line-height: var(--line-height-50);
    height: auto;
    min-height: fit-content;
    /* Position relative so the calendar picker indicator positions relative to THIS input */
    position: relative;

    /* Chrome/Safari date input styling */
    &::-webkit-calendar-picker-indicator {
      /* Make it invisible but CLICKABLE and cover the entire input area */
      opacity: 0;
      pointer-events: auto; /* MUST be clickable! */
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      cursor: pointer;
    }

    &::-webkit-inner-spin-button,
    &::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    /* Firefox date input styling */
    &::-moz-calendar-picker-indicator {
      /* Make it invisible but CLICKABLE and cover the entire input area */
      opacity: 0;
      pointer-events: auto; /* MUST be clickable! */
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      cursor: pointer;
    }
  }
}
/* === ICON component === */
@layer components {
  /* +++ ICON BORDERED - Circular frame for icons +++ */
  /* Note: Sizing handled by @utility icon-bordered-* (see UTILITIES section) */
  .icon-bordered {
    @apply inline-flex items-center justify-center;
    @apply text-primary;
    @apply rounded-full;
    @apply border border-primary;
    @apply shrink-0;
    /* @apply icon-bordered-xl; */

    /* For active state: reverse colors (filled circle with icon in on-primary) */
    .active & {
      @apply bg-primary text-on-primary;
      @apply border-primary;
    }
  }
}
/* === Dropdown Menu === */
@layer components {
  /* +++ DROPDOWN Container +++ */
  .dropdown-container {
    @apply relative;
    /* width: min-content; */ /* REMOVED 2025-11-19 - was causing avatar to collapse to 0x0 in header */
  }

  .dropdown-trigger {
    @apply cursor-pointer;

    /* Hover ring for button wrapper (not avatar directly) 
    &:hover button {
      @apply text-primary bg-transparent;
      @apply transition-all duration-200;
    } */
  }

  /* +++ DROPDOWN Menu +++ */
  .dropdown-menu {
    position: absolute;
    @apply bg-surface;
    @apply border border-outline-variant;
    @apply shadow-md;
    @apply z-50;
    @apply flex flex-col gap-md;
    padding: var(--px-8);
    border-radius: var(--radius);
    /* Animation - applied via position+align specific classes below */
    /* animation: dropdown-slide-in 150ms ease-out; */
    width: min-content;
    height: min-content;
    white-space: nowrap;
    box-shadow: 0px 10px 20px 0px rgba(0, 0, 0, 0.2);
    overflow: var(--overflow-clip-fallback, clip);
  }

  .dropdown-align-left {
    left: 0;
  }

  .dropdown-align-right {
    right: 0;
  }

  .dropdown-align-center {
    left: 50%;
    transform: translateX(-50%);
  }

  /* Dropdown Position Modifiers */
  .dropdown-position-bottom {
    top: 100%;
    bottom: auto;
    margin-top: var(--px-8);
  }

  .dropdown-position-top {
    bottom: 100%;
    top: auto;
    margin-bottom: var(--px-32);
  }
  /* Animation keyframes - Different animations based on position+align */
  @keyframes dropdown-slide-in {
    /* bottom, left - right */
    from {
      opacity: 0;
      transform: translateY(-4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes dropdown-slide-in-top {
    /* top, left - right */
    from {
      opacity: 0;
      transform: translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes dropdown-slide-in-center {
    /* bottom, center */
    from {
      opacity: 0;
      transform: translateX(-50%) translateY(-4px);
    }
    to {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
  }

  @keyframes dropdown-slide-in-top-center {
    /* bottom, center */
    from {
      opacity: 0;
      transform: translateX(-50%) translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
  }

  /* Apply correct animation based on position+align combo */
  .dropdown-menu.dropdown-position-bottom.dropdown-align-left,
  .dropdown-menu.dropdown-position-bottom.dropdown-align-right {
    animation: dropdown-slide-in 200ms ease-out;
  }

  .dropdown-menu.dropdown-position-top.dropdown-align-left,
  .dropdown-menu.dropdown-position-top.dropdown-align-right {
    animation: dropdown-slide-in-top 200ms ease-out;
  }

  .dropdown-menu.dropdown-position-bottom.dropdown-align-center {
    animation: dropdown-slide-in-center 200ms ease-out;
  }

  .dropdown-menu.dropdown-position-top.dropdown-align-center {
    animation: dropdown-slide-in-top-center 200ms ease-out;
  }

  /* +++ MENU ITEM +++ */
  .menu-item-wrapper {
    @apply w-full;
  }

  .menu-item-separator {
    border-bottom: 1px solid var(--color-outline-variant);
    padding-bottom: var(--px-8);
    margin-bottom: var(--px-8);
  }

  .menu-item {
    @apply w-full;
    @apply flex items-center gap-sm;
    @apply single-line-small text-on-surface;
    @apply transition-colors duration-200;
    @apply text-left;
    @apply border-l-2 border-transparent;
    padding: var(--px-4) var(--px-8);
    /* width: min-content; */ /* REMOVED 2025-11-19 - was causing avatar in dropdown to collapse to 0x0! */
    white-space: nowrap;
    height: 28px;
    flex-direction: row;
    justify-content: center;
    align-content: center;
    flex-wrap: nowrap;

    &:hover:not(:disabled) {
      @apply border-primary;
    }

    &:focus-visible {
      --tw-ring-color: color-mix(
        in srgb,
        var(--color-primary),
        transparent 80%
      );
      @apply focus-ring-base;
    }

    &:disabled,
    &[aria-disabled="true"] {
      @apply disabled-item;
    }
  }

  .menu-item-danger {
    @apply text-error;

    &:hover:not(:disabled) {
      @apply bg-error/20;
    }

    &:focus-visible {
      --tw-ring-color: color-mix(in srgb, var(--color-error), transparent 80%);
      @apply focus-ring-base;
    }
  }

  /*
  .menu-item-icon {
    @apply flex items-center justify-center flex-shrink-0;
  }
  */
  .menu-item-label {
    @apply grow;
  }

  .menu-item-trailing {
    @apply flex items-center justify-center shrink-0;
    @apply ml-auto;
  }
}
/* === AVATAR COMPONENT CLASSES === */
@layer components {
  /* Avatar display styles - ONLY for avatar display */
  .avatar-xl {
    @apply av-xl avatar-container;
    @apply transition-all duration-200;

    .avatar-text {
      @apply display-md text-on-primary;
    }

    .avatar-icon {
      @apply icon-av-xl;
      @apply text-on-primary;
    }
  }

  .avatar-lg {
    @apply av-lg avatar-container;
    @apply transition-all duration-200;

    .avatar-text {
      @apply headline-md text-on-primary;
    }

    .avatar-icon {
      @apply icon-av-lg;
      @apply text-on-primary;
    }
  }

  .avatar-md {
    @apply av-md avatar-container;
    @apply transition-all duration-200;

    .avatar-text {
      @apply title-lg text-on-primary;
    }

    .avatar-icon {
      @apply icon-av-md text-on-primary;
    }
  }

  .avatar-sm {
    @apply av-sm avatar-container;
    @apply transition-all duration-200;

    .avatar-text {
      @apply title-sm text-on-primary;
    }

    .avatar-icon {
      @apply icon-av-sm text-on-primary;
    }
  }
}
/* === BUTTON COMPONENT CLASSES === */
@layer components {
  /* +++ BUTTON Component +++ */

  /* Variants */
  .btn-filled {
    /* base-style */
    @apply btn-base;
    @apply bg-primary text-on-primary;
    &:disabled {
      @apply disabled-item;
    }
    &:hover {
      @apply bg-primary/80;
    }
    &:focus-visible {
      --tw-ring-color: color-mix(
        in srgb,
        var(--color-primary),
        transparent 80%
      );
      @apply focus-ring-base;
    }
  }
  .btn-tonal {
    /* base-style */
    @apply btn-base;
    @apply bg-secondary text-on-secondary;
    &:disabled {
      @apply disabled-item;
    }
    &:hover {
      @apply bg-secondary/80;
    }
    &:focus-visible {
      --tw-ring-color: color-mix(
        in srgb,
        var(--color-secondary),
        transparent 80%
      );
      @apply focus-ring-base;
    }
  }
  /* 2025-11-26 Added dismiss variant */
  .btn-subtle,
  .btn-dismiss {
    /* base-style */
    @apply btn-base;
    @apply bg-transparent text-on-surface;
    &:disabled {
      @apply disabled-item;
    }
    &:focus-visible {
      --tw-ring-offset-color: var(--color-primary);
      --tw-ring-color: color-mix(
        in srgb,
        var(--color-primary),
        transparent 80%
      );
      @apply focus-ring-base;
    }
  }

  .btn-subtle {
    &:hover,
    &:active {
      @apply text-primary;
    }
  }

  .btn-dismiss {
    &:hover {
      @apply bg-surface-container-high;
    }
    &:active {
      @apply bg-surface-container-highest;
    }
  }
  /* 2025-11-26 New button variant 'highlighted' */
  .btn-highlighted {
    /* base-style */
    @apply btn-base;
    @apply bg-transparent text-secondary;
    &:disabled {
      @apply disabled-item;
    }
    &:hover {
      @apply emphasized;
    }
    &:focus-visible {
      --tw-ring-offset-color: var(--color-secondary);
      --tw-ring-color: color-mix(
        in srgb,
        var(--color-primary),
        transparent 80%
      );
      @apply focus-ring-base;
    }
    &:active {
      @apply emphasized;
    }
  }

  .btn-outlined {
    /* base-style */
    @apply btn-base;
    @apply bg-transparent text-primary border border-primary;
    @apply transition-colors duration-200;
    &:disabled {
      @apply disabled-item;
    }
    &:hover {
      @apply bg-primary text-on-primary;
    }
    &:focus-visible {
      --tw-ring-color: color-mix(
        in srgb,
        var(--color-primary),
        transparent 80%
      );
      @apply focus-ring-base;
    }
  }
  .btn-destructive {
    /* base-style */
    @apply btn-base;
    @apply bg-error text-on-error;
    &:disabled {
      @apply disabled-item;
    }
    &:hover {
      @apply bg-error/80;
    }
    &:focus-visible {
      --tw-ring-color: color-mix(in srgb, var(--color-error), transparent 80%);
      @apply focus-ring-base;
    }
  }

  /* Size */
  .btn-sm {
    @apply single-line-base;
    padding: var(--px-8) var(--px-8);
    & svg {
      height: var(--px-16);
      width: var(--px-16);
    }
  }
  .btn-md {
    @apply single-line-base;
    padding: var(--px-8) var(--px-12);
    & svg {
      height: var(--px-20);
      width: var(--px-20);
    }
  }
  .btn-lg {
    @apply single-line-medium;
    padding: var(--px-12) var(--px-16);
    & svg {
      height: var(--px-22);
      width: var(--px-22);
    }
  }
  .btn-cta {
    @apply single-line-large;
    padding: var(--px-16) var(--px-20);
    & svg {
      height: var(--px-24);
      width: var(--px-24);
    }
  }
}
/* === SHEET COMPONENT === */
@layer components {
  /* +++ SHEET Component - Mobile slide-up / Desktop modal +++ */
  /* Used for: Profile field editing on mobile */

  /* 1. Backdrop - Semi-transparent overlay behind sheet */
  .sheet-backdrop {
    position: fixed;
    inset: 0;
    z-index: 50;
    background: rgba(0, 0, 0, 0.5);
    animation: sheet-backdrop-fade-in 200ms ease-out;
  }

  @keyframes sheet-backdrop-fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  /* 2. Sheet Content - Slide-in panel from bottom (mobile) / Centered modal (desktop) */
  .sheet-content {
    position: fixed;
    bottom: var(--h-bottomNav);
    left: 0;
    right: 0;
    z-index: 51;
    background: var(--color-surface);
    border-top-left-radius: var(--radius-xl);
    border-top-right-radius: var(--radius-xl);
    box-shadow: var(--elevation-4);
    max-height: calc(
      90vh - 84px
    ); /* Adjust max height to account for nav + FAB */
    overflow-y: auto;
    animation: sheet-slide-in 300ms ease-out;
    @apply flex flex-col;
  }

  @keyframes sheet-slide-in {
    from {
      transform: translateY(100%);
    }
    to {
      transform: translateY(0);
    }
  }

  /* 3. Sheet Header - Sticky at top with title and close button */
  .sheet__header {
    @apply flex items-center justify-between;
    @apply px-lg pt-lg pb-md;
    border-bottom: 1px solid var(--color-outline-variant);
    position: sticky;
    top: 0;
    background: var(--color-surface);
    z-index: 1;
  }

  /* 4. Sheet Title */
  .sheet-title {
    @apply title-lg;
    color: var(--color-on-surface);
  }

  /* 5. Sheet Body - Scrollable content area */
  .sheet-body {
    @apply px-lg py-lg;
    flex: 1;
    overflow-y: auto;
  }

  /* Desktop: Convert to centered modal */
  @media (min-width: 1024px) {
    .sheet-content {
      bottom: 0; /* Desktop: Reset to bottom (no bottom nav) */
      left: 50%;
      transform: translateX(-50%);
      max-width: 448px;
      max-height: 90vh; /* Desktop: Full 90vh available */
      border-radius: var(--radius-xl);
    }

    @keyframes sheet-slide-in {
      from {
        transform: translateX(-50%) translateY(100%);
      }
      to {
        transform: translateX(-50%) translateY(0);
      }
    }
  }
}
/* === ANIMATED BACKGROUND COMPONENT === */
@layer components {
  @keyframes spotlight-1 {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
    }
    25% {
      transform: translate(100px, -50px) scale(1.1);
    }
    50% {
      transform: translate(-50px, 100px) scale(0.9);
    }
    75% {
      transform: translate(50px, 50px) scale(1.05);
    }
  }

  @keyframes spotlight-2 {
    0%,
    100% {
      transform: translate(0, 0) scale(1) rotate(0deg);
    }
    33% {
      transform: translate(-80px, 60px) scale(1.2) rotate(120deg);
    }
    66% {
      transform: translate(60px, -40px) scale(0.8) rotate(240deg);
    }
  }

  @keyframes spotlight-3 {
    0%,
    100% {
      transform: translate(0, 0) scale(1);
    }
    20% {
      transform: translate(40px, -30px) scale(1.1);
    }
    40% {
      transform: translate(-30px, 40px) scale(0.9);
    }
    60% {
      transform: translate(60px, 20px) scale(1.05);
    }
    80% {
      transform: translate(-20px, -40px) scale(0.95);
    }
  }

  @keyframes spotlight-4 {
    0%,
    100% {
      transform: translate(0, 0) scale(1) rotate(0deg);
    }
    50% {
      transform: translate(-40px, 80px) scale(1.3) rotate(180deg);
    }
  }

  @keyframes float {
    0%,
    100% {
      transform: translateY(0px) rotate(0deg);
    }
    50% {
      transform: translateY(-10px) rotate(180deg);
    }
  }

  @keyframes float-pin {
    0%,
    100% {
      transform: translateY(0px) scale(1);
    }
    50% {
      transform: translateY(-8px) scale(1.1);
    }
  }

  @keyframes spin-slow {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  .animate-spotlight-1 {
    animation: spotlight-1 25s ease-in-out infinite;
  }

  .animate-spotlight-2 {
    animation: spotlight-2 30s ease-in-out infinite;
  }

  .animate-spotlight-3 {
    animation: spotlight-3 20s ease-in-out infinite;
  }

  .animate-spotlight-4 {
    animation: spotlight-4 35s ease-in-out infinite;
  }

  .animate-float {
    animation: float 15s ease-in-out infinite;
  }

  .animate-spin-slow {
    animation: spin-slow 20s linear infinite;
  }

  .animate-float-pin {
    animation: float-pin 3s ease-in-out infinite;
  }

  .bg-gradient-radial {
    background: radial-gradient(circle, var(--tw-gradient-stops));
  }
}

/* ============================================================================
   THIRD-PARTY LIBRARY OVERRIDES
   Added: 2025-11-19
   Purpose: Theme-aware styling for Sonner toast notifications
   ============================================================================ */

@layer components {
  /* Base toast styling */
  [data-sonner-toast] {
    background-color: var(--color-surface-container) !important;
    border: 1px solid var(--color-outline-variant) !important;
    color: var(--color-on-surface) !important;
    border-radius: var(--px-8) !important;
    padding: var(--px-12) var(--px-16) !important;
    box-shadow: var(--elevation-lg) !important;
  }

  /* Toast title */
  [data-sonner-toast] [data-title] {
    color: var(--color-on-surface) !important;
  }

  /* Toast description */
  [data-sonner-toast] [data-description] {
    color: var(--color-on-surface-variant) !important;
  }

  /* Success toast - green accent */
  [data-sonner-toast][data-type="success"] {
    border-left: 4px solid var(--color-success) !important;
  }

  [data-sonner-toast][data-type="success"] [data-icon] {
    color: var(--color-success) !important;
  }

  /* Error toast - red accent */
  [data-sonner-toast][data-type="error"] {
    border-left: 4px solid var(--color-error) !important;
  }

  [data-sonner-toast][data-type="error"] [data-icon] {
    color: var(--color-error) !important;
  }

  /* Info toast - blue accent */
  [data-sonner-toast][data-type="info"] {
    border-left: 4px solid var(--color-primary) !important;
  }

  [data-sonner-toast][data-type="info"] [data-icon] {
    color: var(--color-primary) !important;
  }

  /* Warning toast - orange accent */
  [data-sonner-toast][data-type="warning"] {
    border-left: 4px solid var(--color-warning) !important;
  }

  [data-sonner-toast][data-type="warning"] [data-icon] {
    color: var(--color-warning) !important;
  }

  /* Close button */
  [data-sonner-toast] [data-close-button] {
    background-color: transparent !important;
    border: none !important;
    color: var(--color-on-surface-variant) !important;
  }

  [data-sonner-toast] [data-close-button]:hover {
    background-color: var(--color-surface-container-high) !important;
    color: var(--color-on-surface) !important;
  }
}

@layer base {
  html {
    @apply bg-background;
  }
  body {
    @apply body-md text-on-background;
  }
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-header;
  }
}

/* --- Overwriting Browser hijacking --- */

input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active {
  /* This large inset box-shadow covers the default autofill background. */
  -webkit-box-shadow: 0 0 0 1000px var(--color-surface-container-lowest) inset !important;

  /* Forces the text to match your light theme's text color. */
  -webkit-text-fill-color: var(--color-on-surface) !important;

  /* Forces the font size to inherit from the parent element. */
  font-size: inherit !important;

  /* This long transition time prevents the autofill from flickering. */
  transition: background-color 5000s ease-in-out 0s;
}
